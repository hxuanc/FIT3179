{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "data": { "url": "https://raw.githubusercontent.com/hxuanc/FIT3179/main/DataVis2/data/Bar-Industry.csv", 
                "format":{"type": "csv"}},
    "width":400,
    "height":500,
    "encoding": {
        "y": {"field": "Investor"}
    },
    
    "layer": [
        
        {
        "mark": "bar",
        "params": [
            {"name" : "industry_highlight",
            "select" : {"type" : "point", "fields": ["Industry"]},
            "bind" : "legend"}
        ],
        "encoding": {
            "x": {
                "aggregate": "sum", "field": "Count", "type":"quantitative",
                "title": "Investment Breakdown by Industry",
                "stack":  "normalize"
                },
            "color": {
                "field":"Industry",
                "type":"nominal",
                "scale": {"domain" : ["Artificial Intelligence", "Auto and transportation", "Consumer and retail", "Cybersecurity", "Data management and analytics",
                                        "E-commerce and direct-to-consumer", "Edtech", "Fintech", "Hardware", "Health", "Internet software and services",
                                        "Mobile and telecommunications", "Other", "Supply chain, logistics, and delivery", "Travel"],
                            "range" : ["#2541B2", "#3F52E3", "#7692E4" ,"#93ABD3", "#B7657B",
                                        "#A799B7", "#AC66CC", "#C689C6", "#FFD372","#FE7E6D",
                                        "#FFAB76", "#FFCCB3", "#E5CB9F", "#85C88A", "#357C3C"]}
            },
            "tooltip": [{"field" : "Industry", "type": "nominal", "title": "Industry: "},
            {"field" : "Count", "type": "quantitative", "title":"Number of Companies: "},
            {"field" : "Percentage","type": "quantitative", "title": "Percentage of Industry (%): "}
            ]
            }
        },
        {
        "mark": {
            "type": "text",
            "dx": -22
            },

        "encoding": {
            "text": {"aggregate": "sum", "field": "Percentage"},
            "x": {
                "field": "Percentage", "type":"quantitative",
                "title": "Investment Breakdown by Industry",
                "stack":  "normalize"
                },
            "detail":{
                "field":"Industry"
            },
            "color":{"condition": {"test": "datum['Percentage'] > 15", "value":"black"},"value":null}
        }
        
        }
    ],
    "config": {"view": {"stroke": null}, 
    "background": null}
}